<div class="sidebar">
  <h3>
    <mat-icon>list_alt</mat-icon> IncidÃªncias
  </h3>

  <ng-container *ngFor="let entry of entries">
    <div 
      class="menu-item" 
      (click)="toggleCategory(entry.key)" 
      [class.expanded]="expandedCategory === entry.key"
    >
      {{ entry.key }}
      <mat-icon>
        {{ expandedCategory === entry.key ? 'expand_less' : 'chevron_right' }}
      </mat-icon>
    </div>

    <ul *ngIf="expandedCategory === entry.key" class="submenu">
      <li 
        *ngFor="let technique of entry.value" 
        (click)="selecionarTecnica(technique); setActive(technique.id)"
        [class.active]="activeTechniqueId === technique.id"
      >
        <a [routerLink]="['/tecnicas', technique.id]">{{ technique.name }}</a>
      </li>
    </ul>
  </ng-container>
</div>
